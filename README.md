# 股票基金测算程序

一个基于 Vue 3 + Vite 开发的股票基金涨跌停价格测算工具，可以自动计算未来5天的涨停和跌停价格，并提供详细的盈亏分析。

## 功能特性

- 📊 **涨跌停价格计算**：自动计算未来5天的涨停和跌停价格
- 💰 **盈亏分析**：提供盈亏、盈亏比例、实际盈亏、实际盈亏率等多维度分析
- 💾 **数据自动保存**：输入的数据会自动保存到本地存储
- 📱 **响应式设计**：支持桌面端和移动端访问
- 🌓 **主题适配**：自动适配浅色/深色主题

## 技术栈

- **框架**：Vue 3 (Composition API)
- **构建工具**：Vite
- **语言**：JavaScript (ES6+)

## 安装与运行

### 环境要求

- Node.js >= 16.0.0
- npm 或 yarn

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

启动后访问 `http://localhost:5173`

### 构建生产版本

```bash
npm run build
```

### 预览生产版本

```bash
npm run preview
```

## 使用说明

### 输入参数

1. **持仓数量（股）**：您持有的股票数量
2. **成本价（元）**：您买入股票的平均成本价
3. **现价（元）**：当前股票的市场价格
4. **涨跌停比例（%）**：股票的涨跌停限制比例（如10%表示10%）

### 计算结果说明

程序会为每一天计算涨停和跌停两种情况，并显示以下指标：

#### 基础指标

- **基准价**：计算当天的基准价格（涨停路径使用前一天的涨停价，跌停路径使用前一天的跌停价）
- **涨停/跌停价格**：当天的涨停或跌停价格
- **涨跌幅**：相对于前一天的涨跌幅
- **市值**：持仓数量 × 当前价格

#### 盈亏指标

- **盈亏**：当日市值 - 总成本（相对于成本的盈亏）
- **盈亏比例**：(当日价格 - 成本价) / 成本价 × 100%（相对于成本的盈亏比例）

#### 实际盈亏指标

- **实际盈亏**：当前市值 - 上一次市值（相邻两天之间的市值变化）
- **实际盈亏率**：实际盈亏 / 上一次市值 × 100%（实际盈亏相对于上一次市值的比例）

## 计算公式

### 基础公式

#### 涨停价格
```
涨停价 = floor(基准价 × (1 + 涨跌停比例/100)) × 10000 / 10000
```
- 使用向下取整，保留4位小数

#### 跌停价格
```
跌停价 = ceil(基准价 × (1 - 涨跌停比例/100)) × 10000 / 10000
```
- 使用向上取整，保留4位小数

#### 市值计算
```
市值 = 持仓数量 × 当前价格
```

#### 盈亏计算
```
盈亏 = 市值 - 总成本
总成本 = 持仓数量 × 成本价
```

#### 盈亏比例
```
盈亏比例 = (当前价格 - 成本价) / 成本价 × 100%
```

### 实际盈亏计算

#### 实际盈亏
```
实际盈亏 = 当前市值 - 上一次市值
```

- 对于第1天：上一次市值 = 初始当前市值
- 对于第2天及以后：上一次市值 = 前一天的涨跌停市值

#### 实际盈亏率
```
实际盈亏率 = 实际盈亏 / 上一次市值 × 100%
```

### 连续涨跌停原理

#### 基准价更新逻辑

- **涨停路径**：每天的基准价 = 前一天的涨停价
- **跌停路径**：每天的基准价 = 前一天的跌停价
- 两条路径独立计算，互不影响

#### 复利效应

连续N天涨停或跌停会产生复利效应：

```
连续N天涨停：价格_N = 初始价 × (1 + 涨跌停比例/100)^N
连续N天跌停：价格_N = 初始价 × (1 - 涨跌停比例/100)^N
```

## 项目结构

```
valuation/
├── src/
│   ├── components/          # Vue 组件
│   │   ├── CalculationGuide.vue    # 计算公式与知识说明
│   │   ├── StockInput.vue          # 持仓信息输入
│   │   └── StockResultDisplay.vue   # 结果显示
│   ├── utils/               # 工具函数
│   │   ├── calculator.js    # 计算逻辑
│   │   └── storage.js       # 本地存储
│   ├── App.vue              # 主应用组件
│   ├── main.js              # 入口文件
│   └── style.css            # 全局样式
├── public/                  # 静态资源
├── index.html              # HTML 模板
├── package.json            # 项目配置
└── vite.config.js         # Vite 配置
```

## 主要组件说明

### StockInput.vue
持仓信息输入组件，负责：
- 接收用户输入的持仓信息
- 显示当前持仓信息摘要
- 自动保存数据到本地存储
- 触发计算事件

### StockResultDisplay.vue
结果显示组件，负责：
- 展示未来5天的涨跌停预测结果
- 显示每天的详细数据（涨停和跌停）
- 格式化显示各种指标

### CalculationGuide.vue
计算公式与知识说明组件，提供：
- 基础计算公式说明
- 连续涨跌停原理说明
- 计算示例

### calculator.js
计算工具模块，提供：
- `calculateLimitPrices()`: 计算未来N天的涨跌停价格
- `calculateInitialInfo()`: 计算初始持仓信息
- `formatPercent()`: 格式化百分比显示
- `formatAmount()`: 格式化金额显示
- `formatPrice()`: 格式化价格显示

### storage.js
本地存储工具模块，提供：
- `saveStockData()`: 保存股票数据
- `loadStockData()`: 加载股票数据
- `clearStockData()`: 清除股票数据

## 注意事项

1. **计算结果仅供参考**：本程序的计算结果仅供参考，不构成投资建议
2. **数据精度**：价格保留4位小数，百分比保留2位小数
3. **数据保存**：输入的数据会自动保存到浏览器本地存储，清除浏览器数据会丢失
4. **涨跌停规则**：程序按照标准的涨跌停规则计算（涨停向下取整，跌停向上取整）

## 开发说明

### 代码规范

- 使用 Vue 3 Composition API
- 使用 ES6+ 语法
- 函数和变量使用驼峰命名
- 组件使用 PascalCase 命名

### 样式说明

- 支持浅色和深色主题自动切换
- 使用 CSS 变量实现主题适配
- 响应式设计，支持移动端

## 许可证

本项目仅供学习和研究使用。

## 更新日志

### v1.0.0
- 初始版本
- 支持涨跌停价格计算
- 支持盈亏分析
- 支持数据自动保存
- 支持实际盈亏和实际盈亏率计算
